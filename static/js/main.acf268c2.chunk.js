(this.webpackJsonpquizapp=this.webpackJsonpquizapp||[]).push([[0],{30:function(e,t,s){},32:function(e,t,s){},43:function(e,t,s){},44:function(e,t,s){},45:function(e,t,s){},46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){"use strict";s.r(t);var n=s(1),c=s.n(n),a=s(22),i=s.n(a),r=(s(30),s(31),s(2)),o=function(){var e=JSON.parse(localStorage.getItem("data"));return{getQuestions:function(){return e},editQuestion:function(t,s){var n=e.findIndex((function(e){return e.id===t}));e[n].question=s,localStorage.setItem("data",JSON.stringify(e))},deleteQuestion:function(t){var s=e.findIndex((function(e){return e.id===t}));e.splice(s,1),localStorage.setItem("data",JSON.stringify(e))},addAnswer:function(t,s){var n=e.findIndex((function(e){return e.id===t}));e[n].answers.push(s),localStorage.setItem("data",JSON.stringify(e))},addQuestion:function(t){console.log(t),e.push({id:e.length+1,question:t,answers:[]}),localStorage.setItem("data",JSON.stringify(e))}}},l=s(10),u=s(6),d=(s(32),s(14)),j=s(12),b=s(4),O=s(0),m=Object(n.createContext)({status:null}),h=function(e){var t=e.children,s=Object(b.g)(),c=Object(n.useState)(),a=Object(r.a)(c,2),i=a[0],o=a[1];return Object(n.useEffect)((function(){var e=JSON.parse(localStorage.getItem("status"));e?o(e):s.push("/")}),[]),Object(O.jsx)(m.Provider,{value:{status:{authStatus:i,setAuthStatus:o}},children:t})},x=m,f=function(e){var t=e.children,s=e.questionObj,c=e.toggle,a=e.setToggle,i=Object(n.useContext)(x).status.authStatus.isAdmin,b=o().addAnswer,m=Object(n.useState)(!1),h=Object(r.a)(m,2),f=h[0],v=h[1],g=(s||[]).answers,p=g.length>0&&function(e){var t=Object(u.a)(e);return{latestAnswer:t.pop(),previousAnswers:t.join(", ")}}(g)||{},N=p.latestAnswer,S=p.previousAnswers,w=Object(d.a)(),q=w.register,A=w.handleSubmit;return Object(O.jsxs)("div",{className:"answer",children:[t,(f||(s&&g.length)<1)&&!i?Object(O.jsx)("div",{children:Object(O.jsx)("form",{onSubmit:A((function(e){v(!1),b(s.id,e.answer),a(!c)})),children:Object(O.jsx)("div",{className:"d-flex",children:Object(O.jsx)("div",{className:"form-group",children:Object(O.jsx)("input",Object(l.a)({className:"form-control",type:"text",id:"answer",placeholder:"Answer"},q("answer",{required:!0})))})})})}):Object(O.jsxs)(O.Fragment,{children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{children:"answer : ".concat(N||"No Answer yet")}),S&&Object(O.jsx)("div",{className:"previous-answer",children:S})]}),!i&&Object(O.jsx)("div",{className:"answer-edit",children:Object(O.jsx)(j.c,{onClick:function(){v(!0)}})})]})]})},v=function(){var e=o().getQuestions,t=Object(n.useState)([]),s=Object(r.a)(t,2),c=s[0],a=s[1],i=Object(n.useState)(!1),l=Object(r.a)(i,2),u=l[0],d=l[1];Object(n.useEffect)((function(){var t=e();a(t)}),[u]);var j=c?c.map((function(e,t){t++;var s=e.question,n=e.id;return Object(O.jsx)(f,{questionObj:e,toggle:u,setToggle:d,children:"".concat(t,". ").concat(s)},n)})):[];return Object(O.jsx)("div",{className:"c-container",children:Object(O.jsx)("div",{className:"answers",children:j})})},g=(s(43),s(11)),p=function(){var e=Object(n.useContext)(x).status,t=Object(b.g)(),s=e.authStatus,c=e.setAuthStatus;return Object(O.jsxs)("div",{className:"header",children:[s&&!0===s.isAdmin&&Object(O.jsx)(g.b,{to:"/questions",className:"cnav-link",children:"Questions"}),Object(O.jsx)(g.b,{to:"/answers",className:"cnav-link",children:"Answers"}),Object(O.jsx)("div",{className:"cnav-link",children:Object(O.jsx)(j.d,{onClick:function(){c({isAuthenticated:!1,isAdmin:!1}),localStorage.removeItem("status"),t.push("/")},className:"icon logout-icon"})})]})},N=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{}),Object(O.jsx)(v,{})]})},S=(s(44),function(){return Object(O.jsx)("div",{className:"nomatch",children:"No match found"})}),w=(s(45),function(e){var t=e.children,s=e.editHandler,n=e.deleteHandler;return Object(O.jsxs)("div",{className:"question",children:[Object(O.jsx)("div",{children:t}),Object(O.jsxs)("div",{className:"icon-group",children:[Object(O.jsx)("div",{className:"icon",children:Object(O.jsx)(j.c,{onClick:s})}),Object(O.jsx)("div",{className:"icon",children:Object(O.jsx)(j.b,{onClick:n})})]})]})}),q=function(){var e=Object(n.useState)(!1),t=Object(r.a)(e,2),s=t[0],c=t[1];return[s,function(){c(!0)},function(e){e&&(e.stopPropagation(),e.preventDefault(),c(!1)),e||c(!1)}]},A=(s(46),function(e){var t=e.closeModal,s=e.children;return Object(O.jsx)("div",{className:"cmodal",children:Object(O.jsx)("div",{className:"cmodal-backdrop",onClick:function(e){e&&e.currentTarget===e.target&&t()},children:Object(O.jsxs)("div",{className:"cmodal-body",children:[Object(O.jsx)("div",{className:"cmodal-close",children:Object(O.jsx)("div",{className:"cmodal-close-button",onClick:t,children:Object(O.jsx)(j.a,{})})}),Object(O.jsx)("div",{className:"cmodal-content",children:s})]})})})}),y=Object(n.createContext)(null),C=function(e){var t=e.children,s=e.toggler;return Object(O.jsx)(y.Provider,{value:s,children:t})},k=y,I=function(e){var t=e.prevValues,s=e.onSubmit,n=e.handleSubmit,c=e.register,a=e.placeHolder;return Object(O.jsxs)("form",{onSubmit:n(s),children:[Object(O.jsx)("div",{className:"form-group",children:Object(O.jsx)("input",Object(l.a)({className:"form-control",type:"text",id:"question",placeholder:a||"",defaultValue:t&&t.question||""},c("question",{required:!0})))}),Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)("button",{className:"btn",children:"Submit"})})]})},J=function(e){var t=e.closeModal,s=e.questionObj,c=o().editQuestion,a=Object(n.useContext)(k),i=a.toggle,r=a.setToggle,l=Object(d.a)(),u=l.register,j=l.handleSubmit;return Object(O.jsx)(A,{closeModal:t,children:Object(O.jsx)(I,{prevValues:s,register:u,onSubmit:function(e){c(s.id,e.question),r(!i),t()},handleSubmit:j})})},Q=function(e){var t=e.closeModal,s=(e.questionObj,o().addQuestion),c=Object(n.useContext)(k),a=c.toggle,i=c.setToggle,r=Object(d.a)(),l=r.register,u=r.handleSubmit;return Object(O.jsx)(A,{closeModal:t,children:Object(O.jsx)(I,{register:l,onSubmit:function(e){s(e.question),i(!a),t()},handleSubmit:u,placeHolder:"Your Question"})})},P=(s(47),function(){var e=q(),t=Object(r.a)(e,3),s=t[0],c=t[1],a=t[2],i=q(),l=Object(r.a)(i,3),u=l[0],d=l[1],j=l[2],b=Object(n.useState)(),m=Object(r.a)(b,2),h=m[0],x=m[1],f=o(),v=f.deleteQuestion,g=f.getQuestions,p=Object(n.useState)(!1),N=Object(r.a)(p,2),S=N[0],A=N[1],y=Object(n.useState)(),k=Object(r.a)(y,2),I=k[0],P=k[1];Object(n.useEffect)((function(){var e=g();P(e)}),[S]);var E=I?I.map((function(e,t){return t++,Object(O.jsx)(w,{editHandler:(n=e,function(e){x(n),c()}),deleteHandler:(s=e.id,function(e){v(s),A(!S)}),children:"".concat(t,". ").concat(e.question)},e.id);var s,n})):[];return Object(O.jsx)("div",{className:"c-container",children:Object(O.jsxs)("div",{className:"questions",children:[Object(O.jsx)("div",{className:"text-right",children:Object(O.jsx)("button",{className:"btn cbtn",onClick:d,children:"Add question"})}),E,Object(O.jsxs)(C,{toggler:{toggle:S,setToggle:A},children:[s&&Object(O.jsx)(J,{closeModal:a,questionObj:h}),u&&Object(O.jsx)(Q,{closeModal:j})]})]})})}),E=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p,{}),Object(O.jsx)(P,{})]})},M=(s(48),[{id:1,isAdmin:!0,email:"admin@admin.com",password:"admin"},{id:1,isAdmin:!1,email:"user@user.com",password:"user"}]),W=function(){var e=Object(n.useState)(),t=Object(r.a)(e,2),s=t[0],c=t[1],a=Object(n.useContext)(x).status.setAuthStatus,i=Object(b.g)();return{checkAuth:function(e){var t=e.email,s=e.password,n=M.find((function(e){return e.email===t}));if(n)if(n.password===s){var r={isAuthenticated:!0,isAdmin:n.isAdmin};a(r),localStorage.setItem("status",JSON.stringify(r)),n.isAdmin?i.push("/questions"):n.isAdmin||i.push("/answers")}else c("Password does not match");else c("No such email exists")},errors:s}},F=function(){var e=Object(d.a)(),t=e.register,s=e.handleSubmit,n=e.formState.errors,c=W(),a=c.checkAuth,i=c.errors;return Object(O.jsx)("div",{className:"c-container",children:Object(O.jsx)("div",{className:"signin-container",children:Object(O.jsxs)("form",{onSubmit:s((function(e){a(e)})),children:[Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"email",children:"Email address"}),Object(O.jsx)("input",Object(l.a)({className:"form-control",type:"email",id:"email"},t("email",{required:!0}))),n.email&&Object(O.jsx)("span",{className:"text-warning",children:Object(O.jsx)("small",{children:"Email is Required"})})]}),Object(O.jsxs)("div",{className:"form-group",children:[Object(O.jsx)("label",{htmlFor:"password",children:"Password"}),Object(O.jsx)("input",Object(l.a)({className:"form-control",type:"password",id:"password"},t("password",{required:!0}))),n.password&&Object(O.jsx)("span",{className:"text-warning",children:Object(O.jsx)("small",{children:"Password is Required "})})]}),i&&Object(O.jsx)("div",{className:"text-warning",children:i}),Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)("button",{className:"btn cbtn login-button",children:"login"})})]})})})},H=s(25),T=function(){var e=Object(n.useContext)(x).status.authStatus,t=Object(n.useState)(),s=Object(r.a)(t,2),c=s[0],a=s[1];Object(n.useEffect)((function(){a(e)}),[e]);return{PrivateRoute:function(e){var t=e.children,s=e.admin,n=Object(H.a)(e,["children","admin"]);return Object(O.jsx)(O.Fragment,{children:c&&(s?Object(O.jsx)(b.b,Object(l.a)(Object(l.a)({},n),{},{render:function(){return c.isAuthenticated&&c.isAdmin?t:Object(O.jsx)(b.a,{to:"/"})}})):Object(O.jsx)(b.b,Object(l.a)(Object(l.a)({},n),{},{render:function(){return c.isAuthenticated?t:Object(O.jsx)(b.a,{to:"/"})}})))})}}},R=function(){var e=T().PrivateRoute;return Object(O.jsxs)(b.d,{children:[Object(O.jsx)(b.b,{exact:!0,path:"/",children:Object(O.jsx)(F,{})}),Object(O.jsx)(e,{admin:!0,exact:!0,path:"/questions",children:Object(O.jsx)(E,{})}),Object(O.jsx)(e,{exact:!0,path:"/answers",children:Object(O.jsx)(N,{})}),Object(O.jsx)(b.b,{path:"*",children:Object(O.jsx)(S,{})})]})},D=[{id:1,question:"What is your name ?",answers:["asif","ahmed","omi"]},{id:2,question:"What is your pet's name ?",answers:[]},{id:3,question:"What is your pet's name ?",answers:[]},{id:4,question:"What is your pet's name ?",answers:[]},{id:5,question:"What is your pet's name ?",answers:[]},{id:6,question:"What is your pet's name ?",answers:[]},{id:7,question:"What is your pet's name ?",answers:[]}],V=Object(n.createContext)(null),z=function(e){var t=e.children,s=Object(n.useState)(),c=Object(r.a)(s,2),a=c[0],i=c[1];return Object(n.useEffect)((function(){if(D){var e=localStorage.getItem("data");"undefined"!==e&&null!==e&&void 0!==e?i(JSON.parse(e)):(localStorage.setItem("data",JSON.stringify(D)),window.location.reload())}}),[]),Object(O.jsx)(V.Provider,{value:{questionsData:{data:a,setData:i}},children:t})};var B=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)(g.a,{basename:"/",children:Object(O.jsx)(h,{children:Object(O.jsx)(z,{children:Object(O.jsx)(R,{})})})})})};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(B,{})}),document.getElementById("root"))}},[[49,1,2]]]);
//# sourceMappingURL=main.acf268c2.chunk.js.map